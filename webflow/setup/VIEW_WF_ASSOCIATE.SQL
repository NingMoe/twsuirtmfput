CREATE VIEW VIEW_WF_ASSOCIATE
AS 
SELECT 	WF_USERTASK.ID,
		WF_USERTASK.TASKID,
		WF_USERTASK.CREATETIME,
		WF_USERTASK.VIEWTIME,
		WF_USERTASK.DEALTIME, 
		WF_USERTASK.EMPCODE,
		WF_TASK.NODENAME,
		WF_TASK.CREATORNAME,
		WF_TASK.WF_INSTANCE_ID AS FLOWINSTID,
		(SELECT TOP 1 FLOWID FROM WF_INSTANCE WHERE WF_INSTANCE.ID=WF_TASK.WF_INSTANCE_ID) AS FLOWID,
		(SELECT TOP 1 FLOWNAME FROM WF_INSTANCE WHERE WF_INSTANCE.ID=WF_TASK.WF_INSTANCE_ID) AS FLOWNAME, 
		(SELECT TOP 1 TASKSTATUS FROM WF_INSTANCE WHERE WF_INSTANCE.ID=WF_TASK.WF_INSTANCE_ID) AS FLOWTASKSTATUS,
		(SELECT TOP 1 MAINFIELDVALUE FROM WF_INSTANCE WHERE WF_INSTANCE.ID=WF_TASK.WF_INSTANCE_ID) AS MAINFIELDVALUE
FROM WF_USERTASK, WF_TASK  
WHERE WF_USERTASK.TASKID = WF_TASK.ID  
	AND WF_USERTASK.NODEID = WF_TASK.NODEID  
	AND WF_USERTASK.TASKSTATUS=0
	AND WF_TASK.NodeType = 1



